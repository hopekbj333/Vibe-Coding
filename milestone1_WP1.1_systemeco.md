# 📦 WP 1.1: 시스템 환경 및 공통 모듈 (Infrastructure)

앱의 기초 공사입니다.

## 시나리오

### S 1.1.1: Flutter 프로젝트 초기화 ✅

**📋 기술적 요구사항:**
- 프로젝트 생성 및 폴더 구조 설계 (feature-first 또는 layer-first) ✅
- 라우팅 설정 (go_router 등) ✅
- 환경 변수 관리 (dev/staging/prod) ✅

**💡 비개발자를 위한 설명:**

**뭘 했나요?**
앱을 만들기 위한 기본 틀을 만든 작업입니다. 집을 짓기 전에 설계도와 기초를 다지는 것과 같습니다.

**구체적으로:**
- **프로젝트 구조 설계**: 코드를 기능별로 정리할 폴더 구조를 만들었습니다. 예를 들어 "검사 기능", "사용자 관리 기능" 등을 각각의 폴더에 넣어서 나중에 찾기 쉽게 했습니다.
- **화면 이동 설정**: 앱에서 한 화면에서 다른 화면으로 이동할 수 있도록 길을 만들어 놓았습니다. 예를 들어 "시작 화면 → 홈 화면"으로 이동하는 경로를 설정했습니다.
- **환경 설정 관리**: 개발용, 테스트용, 실제 서비스용으로 앱을 다르게 실행할 수 있도록 설정했습니다. 예를 들어 개발할 때는 "개발 모드"로, 실제 사용자에게 배포할 때는 "서비스 모드"로 실행할 수 있습니다.

**왜 필요한가요?**
앱의 모든 기능이 이 기초 위에 만들어지기 때문에, 처음에 잘 만들어두면 나중에 기능을 추가하거나 수정할 때 훨씬 쉽습니다.

---

### S 1.1.2: Firebase 연동 ✅

**📋 기술적 요구사항:**
- Firebase 프로젝트 생성 및 앱 등록 ✅
- Firestore 데이터베이스 초기 스키마 설계 ✅
- Storage 버킷 설정 (음성 파일 저장용) ✅
- Cloud Functions 기본 설정 ✅

**💡 비개발자를 위한 설명:**

**뭘 했나요?**
앱이 데이터를 저장하고 불러올 수 있도록 클라우드 서버와 연결하는 작업입니다. 앱이 혼자서는 데이터를 저장할 수 없기 때문에, 구글의 Firebase라는 서비스를 사용하기로 했습니다.

**구체적으로:**
- **데이터베이스 설계**: 사용자 정보, 아동 프로필, 검사 결과 등을 어떻게 저장할지 미리 설계했습니다. 마치 서류함에 어떤 서류를 어디에 넣을지 정해놓는 것과 같습니다.
- **파일 저장소 설정**: 검사 중 녹음한 음성 파일을 저장할 공간을 준비했습니다. 예를 들어 아동이 따라 말한 음성을 저장했다가 나중에 채점할 수 있도록 했습니다.
- **서버 기능 준비**: 나중에 필요한 서버 기능을 추가할 수 있도록 기본 설정을 해놓았습니다.

**왜 필요한가요?**
앱에서 만든 데이터(검사 결과, 사용자 정보 등)를 안전하게 저장하고, 여러 기기에서 접근할 수 있게 하기 위해서입니다. 예를 들어 집에서 검사를 시작했다가 나중에 다른 기기에서 이어서 할 수 있게 됩니다.

**현재 상태:**
기본 구조는 다 만들어졌지만, 실제 Firebase 프로젝트를 생성하고 연결하는 작업은 아직 남아있습니다. 하지만 코드는 이미 준비되어 있어서, Firebase 프로젝트만 만들면 바로 사용할 수 있습니다.

---

### S 1.1.3: 전역 상태 관리 설계 ✅

**📋 기술적 요구사항:**
- 상태 관리 라이브러리 선정 (Riverpod) ✅
- 전역 상태 구조 설계 (사용자 정보, 검사 진행 상태 등) ✅

**💡 비개발자를 위한 설명:**

**뭘 했나요?**
앱 전체에서 공유할 정보를 어떻게 관리할지 설계하고 준비한 작업입니다. 예를 들어 "지금 로그인한 사용자는 누구인가?", "현재 선택된 아동은 누구인가?" 같은 정보를 모든 화면에서 쉽게 접근할 수 있도록 만든 것입니다.

**구체적으로:**
- **상태 관리 도구 선택**: 여러 옵션 중에서 Riverpod이라는 도구를 선택했습니다. 이 도구는 안전하고 사용하기 쉬워서 선택했습니다.
- **공유할 정보 정의**: 
  - 로그인 상태: 누가 로그인했는지
  - 앱 모드: 부모 모드인지 아동 모드인지
  - 선택된 아동: 지금 검사할 아동이 누구인지
  - 검사 진행 상태: 검사가 진행 중인지, 일시정지인지 등
- **접근 방법 만들기**: 어떤 화면에서든 이 정보를 쉽게 읽고 변경할 수 있도록 코드를 만들었습니다.

**왜 필요한가요?**
예를 들어 로그인 화면에서 로그인을 하면, 다른 모든 화면에서도 "이 사용자가 로그인했다"는 정보를 알아야 합니다. 또는 아동 선택 화면에서 아동을 선택하면, 검사 화면에서도 그 아동의 정보를 사용할 수 있어야 합니다. 이런 정보를 각 화면마다 따로 관리하면 복잡하고 실수하기 쉬우니, 한 곳에서 관리하도록 만든 것입니다.

**비유로 설명하면:**
앱 전체에서 사용할 공용 사물함을 만들고, 각 화면(방)에서 이 사물함에 접근할 수 있는 열쇠를 준 것입니다. 예를 들어 "로그인 상태"라는 서랍에 정보를 넣어두면, 어떤 화면에서든 그 서랍을 열어서 정보를 확인할 수 있습니다.

---

### S 1.1.4: 에셋 매니저 구현 ✅

**📋 기술적 요구사항:**
- 이미지/오디오 리소스 사전 로딩(Pre-fetch) 모듈 ✅
- 캐싱 전략 설계 (메모리/디스크 캐시) ✅
- 로딩 상태 표시 컴포넌트 ✅

**💡 비개발자를 위한 설명:**

**뭘 했나요?**
앱에서 사용할 이미지, 음성 파일 등을 미리 불러와서 저장해두는 시스템을 만든 작업입니다. 예를 들어 검사에 사용할 그림이나 음성 안내를 미리 준비해두면, 검사할 때 바로 사용할 수 있어서 빠릅니다.

**구체적으로:**
- **에셋 매니저**: 이미지와 오디오 파일을 미리 로드하고 저장하는 도구를 만들었습니다.
- **캐싱 시스템**: 
  - 메모리 캐시: 자주 사용하는 파일을 빠르게 접근할 수 있도록 메모리에 보관
  - 디스크 캐시: 네트워크에서 다운로드한 파일을 디스크에 저장하여 오프라인에서도 사용 가능
- **로딩 상태 표시**: 에셋을 불러오는 동안 아동 친화적인 애니메이션과 진행률을 보여줍니다.

**왜 필요한가요?**
검사 중에 그림이나 음성을 불러오는데 시간이 걸리면, 아동이 기다려야 해서 집중력이 떨어질 수 있습니다. 미리 준비해두면 검사가 더 부드럽게 진행됩니다.

**비유로 설명하면:**
도서관에서 책을 읽기 전에 필요한 책들을 미리 책상에 가져다 놓는 것과 같습니다. 책을 읽다가 필요한 책을 찾으러 가면 시간이 걸리고 집중이 깨지지만, 미리 준비해두면 책 읽기가 훨씬 부드럽게 진행됩니다.

---

### S 1.1.5: 공통 UI 라이브러리 ✅

**📋 기술적 요구사항:**
- 디자인 시스템 정의 (컬러, 타이포그래피, 스페이싱) ✅
- 공통 컴포넌트: 버튼, 다이얼로그, 로딩 인디케이터 ✅
- 1.5배 느린 애니메이션 기본값 설정 ✅

**💡 비개발자를 위한 설명:**

**뭘 했나요?**
앱 전체에서 사용할 공통 디자인 요소(버튼, 다이얼로그 등)를 만든 작업입니다. 예를 들어 "확인" 버튼을 앱 전체에서 똑같은 모양으로 사용하도록 만든 것입니다.

**구체적으로:**
- **디자인 시스템**: 앱 전체에서 사용할 색상, 글꼴 크기, 간격 등을 한 곳에서 정의했습니다. 예를 들어 "파란색"을 사용할 때마다 같은 파란색을 사용하도록 했습니다.
- **공통 버튼**: 아동이 쉽게 누를 수 있도록 큰 버튼을 만들었습니다. 또한 성공(초록색), 오류(빨간색) 등 명확한 색상으로 구분했습니다.
- **공통 다이얼로그**: 확인이나 알림을 표시할 때 사용하는 팝업 창을 만들었습니다. 이미지나 아이콘을 중심으로 표시하여 텍스트를 최소화했습니다.
- **로딩 인디케이터**: 데이터를 불러오는 동안 표시하는 로딩 화면을 만들었습니다. 아동 친화적인 캐릭터 애니메이션을 포함했습니다.
- **애니메이션 유틸리티**: 화면 전환이나 요소가 나타날 때 사용하는 애니메이션을 일반 앱보다 1.5배 느리게 설정했습니다.

**왜 필요한가요?**
모든 화면에서 버튼이나 다른 요소들이 똑같은 모양이면, 사용자가 앱을 사용하기 쉽고, 개발할 때도 한 번 만든 것을 여러 곳에서 재사용할 수 있어서 효율적입니다. 특히 아동 친화적인 디자인을 위해 애니메이션 속도를 일반 앱보다 1.5배 느리게 설정하여, 아동이 충분히 생각할 시간을 주도록 합니다.

**비유로 설명하면:**
모든 방의 문 손잡이를 똑같은 모양으로 만드는 것과 같습니다. 사용자는 어떤 방에 가도 같은 방식으로 문을 열 수 있고, 건축가도 한 번 설계한 손잡이를 여러 곳에서 재사용할 수 있습니다.

