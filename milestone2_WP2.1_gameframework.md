# 📦 WP 2.1: 게임 엔진 및 학습 프레임워크 (Game Framework)

Flame Engine을 도입하고 학습 세션의 공통 구조를 구축합니다.

---

## 🎮 시나리오 1: 게임 엔진 도입

### S 2.1.1: Flame Engine 프로젝트 통합

**📋 기술적 요구사항:**
- Flutter 프로젝트에 Flame Engine 패키지 추가
- 게임 루프(Game Loop) 기본 구조 설정
- 기존 Flutter 위젯과 Flame 게임 화면 간 전환 구조 설계

**💡 비개발자를 위한 설명:**

**뭘 했나요?**
아이들을 위한 학습 게임을 만들 수 있는 "게임 엔진"을 추가했습니다. 마치 레고 블록으로 집을 짓듯이, 게임을 만드는 전문 도구를 프로젝트에 추가하는 작업입니다.

**구체적으로:**
- **Flame Engine**: Flutter용 2D 게임 엔진입니다. 게임을 만드는 전문 도구 세트라고 생각하시면 됩니다.
- **게임 루프**: 게임이 부드럽게 움직이도록 1초에 60번씩 화면을 업데이트하는 시스템입니다. 마치 만화책의 페이지를 빠르게 넘기면 움직이는 것처럼 보이는 원리입니다.
- **전환 구조**: 일반 화면(버튼, 텍스트)에서 게임 화면(캐릭터, 애니메이션)으로 자연스럽게 전환되도록 연결합니다.

**왜 필요한가요?**
검사 화면은 단순한 버튼과 이미지만 있어도 되지만, 학습 게임은 다릅니다. 캐릭터가 움직이고, 애니메이션이 있고, 효과음이 나야 아이들이 재미있어합니다. Flame Engine은 이런 게임을 쉽게 만들 수 있게 도와주는 도구입니다.

---

### S 2.1.2: 게임 에셋 관리 시스템

**📋 기술적 요구사항:**
- 스프라이트 시트, 애니메이션 파일 로딩 구조
- 오디오 풀(Audio Pool) 관리 (효과음 즉시 재생)
- 레벨별 에셋 번들링 및 지연 로딩(Lazy Loading)

**💡 비개발자를 위한 설명:**

**뭘 했나요?**
게임에 사용될 이미지, 애니메이션, 소리 파일들을 효율적으로 관리하는 시스템을 만들었습니다.

**구체적으로:**
- **스프라이트 시트**: 여러 이미지를 하나의 큰 이미지로 모은 것입니다. 마치 스티커 한 장에 여러 스티커가 붙어있는 것처럼, 한 파일에 캐릭터의 여러 동작을 담습니다.
- **오디오 풀**: 효과음을 미리 준비해두었다가 필요할 때 즉시 재생합니다. 마치 악기 연주자가 악기를 손에 들고 대기하는 것과 같습니다.
- **지연 로딩**: 필요한 파일만 그때그때 불러옵니다. 모든 짐을 한 번에 들지 않고, 필요할 때마다 조금씩 들어 올리는 것과 같습니다.

**왜 필요한가요?**
게임이 빠르게 실행되고 부드럽게 작동하려면, 파일들을 잘 정리해두어야 합니다. 특히 모바일 기기는 메모리가 제한적이므로, 필요한 것만 효율적으로 로딩해야 합니다.

---

## 🔄 시나리오 2: 학습 세션 프레임워크

### S 2.1.3: 학습 세션 상태 관리

**📋 기술적 요구사항:**
- 세션 시작/진행/종료 상태 머신(State Machine) 구현
- 현재 진행 중인 게임, 스테이지, 문제 번호 추적
- 세션 중단 시 자동 저장 (검사 프레임워크와 동일 패턴)

**💡 비개발자를 위한 설명:**

**뭘 했나요?**
아이가 학습 게임을 하는 동안의 진행 상황을 관리하는 시스템입니다. 마치 게임에서 "저장하기" 기능과 같습니다.

**구체적으로:**
- **상태 머신**: 학습이 "시작됨 → 진행 중 → 완료" 같은 단계로 진행됩니다. 현재 어느 단계인지 항상 추적합니다.
- **진행 추적**: 지금 몇 번째 문제를 하고 있는지, 몇 개를 맞혔는지 기록합니다.
- **자동 저장**: 앱을 닫아도 다음에 이어서 할 수 있도록 자동으로 저장됩니다.

**왜 필요한가요?**
아이가 학습 중간에 앱을 닫거나 다른 일을 해도, 나중에 정확히 중단한 지점부터 이어서 할 수 있어야 합니다.

---

### S 2.1.4: 동적 난이도 조절 엔진

**📋 기술적 요구사항:**
- 최근 N문제 정답률 기반 난이도 자동 조정
- 난이도 파라미터: 제한 시간, 보기 개수, 속도
- Frustration-Free 설계: 연속 오답 시 난이도 하향

**💡 비개발자를 위한 설명:**

**뭘 했나요?**
아이의 실력에 맞춰 문제 난이도를 자동으로 조절하는 똑똑한 시스템입니다.

**구체적으로:**
- **자동 조정**: 최근 5문제를 많이 틀리면 문제를 더 쉽게 만들고, 잘 맞히면 더 어렵게 만듭니다.
- **난이도 조절 방법**: 
  - 시간을 더 주기/줄이기
  - 보기를 적게/많이 주기
  - 게임 속도를 느리게/빠르게
- **좌절 방지**: 3번 연속 틀리면 자동으로 쉬운 문제로 바꿔서 아이가 포기하지 않게 합니다.

**왜 필요한가요?**
모든 아이가 같은 속도로 배우지 않습니다. 너무 쉬우면 지루하고, 너무 어려우면 좌절합니다. 아이의 실력에 딱 맞는 "적절한 도전"을 제공해야 학습 효과가 좋습니다.

**실제 예시:**
- 철수가 음절 쪼개기를 5문제 연속 맞힘 → 시간을 5초에서 3초로 줄임
- 영희가 3문제 연속 틀림 → 보기를 4개에서 2개로 줄이고, 시간을 7초로 늘림

---

### S 2.1.5: 인터랙티브 피드백 시스템

**📋 기술적 요구사항:**
- 정답 시: 축하 애니메이션 + 효과음 + 음성("잘했어!")
- 오답 시: 부드러운 실패 애니메이션 + 격려 음성("다시 해볼까?")
- 터치/드래그 시 즉각적 시각 피드백

**💡 비개발자를 위한 설명:**

**뭘 했나요?**
아이가 게임에서 뭔가를 할 때마다 즉각적으로 반응하는 시스템입니다. 마치 선생님이 바로 옆에서 "잘했어!", "한번 더 해볼까?" 하고 말해주는 것과 같습니다.

**구체적으로:**
- **정답 시**: 
  - 반짝이는 별 애니메이션
  - "딩동댕" 효과음
  - 캐릭터가 기뻐하는 애니메이션
  - "잘했어!" 음성
  
- **오답 시**:
  - 부드럽게 흔들리는 애니메이션 (무섭지 않게)
  - "앗!" 소리 (실망스럽지 않게)
  - "괜찮아, 다시 해볼까?" 격려 음성

- **터치 시**:
  - 버튼을 누르면 즉시 커지거나 색이 변함
  - 손으로 만지는 느낌을 주는 피드백

**왜 필요한가요?**
아이들은 즉각적인 반응을 좋아합니다. 버튼을 눌렀는데 아무 반응이 없으면 "망가진 건가?" 생각하고 흥미를 잃습니다. 반대로 눌렀을 때 바로 반응이 오면 "내가 한 거야!" 하며 성취감을 느낍니다.

**특히 중요한 점:**
- 오답이어도 아이가 좌절하지 않도록 **부드럽고 격려하는** 피드백을 줍니다
- "틀렸어" 대신 "한번 더 해볼까?"라고 말합니다

---

**작성일**: 2025-12-04  
**상태**: 준비 완료

